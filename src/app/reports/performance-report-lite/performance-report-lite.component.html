<div class="my-container">
  <h3 class="lead">Relatório de performance (lite)</h3>
</div>

<div class="col-md-12" id="searchForm">
  <form [formGroup]="searchForm" autocomplete="off">
    <mat-card-title>
      <div class="row search-bar-group">
        <div class="title">
          Parâmetros
        </div>
        <div class="bar"></div>
        <div class="buttons">
          <a mat-button (click)="filterOpen = !filterOpen">
            <mat-icon>keyboard_arrow_down</mat-icon>
          </a>
        </div>
      </div>
    </mat-card-title>
    <mat-card *ngIf="filterOpen" class="filter-grid">
      <div class="row">
        <div class="col-md-12">
          <mat-form-field class="col-md-3">
            <input [matDatepicker]="initialDatepicker" formControlName="initial_date" matInput placeholder="Data inicial*">
            <mat-datepicker-toggle matSuffix [for]="initialDatepicker"></mat-datepicker-toggle>
            <mat-datepicker #initialDatepicker></mat-datepicker>
          </mat-form-field>
          <mat-form-field class="col-md-3">
            <input [matDatepicker]="finalDatepicker" formControlName="final_date" matInput placeholder="Data final*">
            <mat-datepicker-toggle matSuffix [for]="finalDatepicker"></mat-datepicker-toggle>
            <mat-datepicker #finalDatepicker></mat-datepicker>
          </mat-form-field>
          <mat-form-field class="col-md-3">
            <mat-select formControlName="time_to_analyze" placeholder="Tempo de análise*">
              <mat-option></mat-option>
              <mat-option value="15">15 dias</mat-option>
              <mat-option value="30">1 mês</mat-option>
              <mat-option value="90">3 meses</mat-option>
              <mat-option value="180">6 meses</mat-option>
              <mat-option value="365">1 ano</mat-option>
              <mat-option value="730">2 anos</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field class="col-md-3">
            <mat-select formControlName="attendances" placeholder="Atendimento" [compareWith]="compareAttendance" multiple>
              <mat-option></mat-option>
              <mat-option *ngFor="let attendance of attendances" [value]="attendance">
                {{ attendance.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
    </mat-card>
  </form>
</div>

<!-- Quando houver algum registro -->
<div *ngIf="performanceLite" class="col-md-12 data">
  <mat-card class="col-md-12">
    <table class="table mat-table report">
      <div class="mat-header-row">
        <div class="cb-title">
          Resultado
          <br>
          <small>{{ searchForm.controls.initial_date.value | date: 'dd/MM/yy' }} à {{ searchForm.controls.final_date.value | date:
            'dd/MM/yy' }}
          </small>
        </div>
        <div class="cb-items opportunity opportunity-quantity">
          <div class="title">oportunidades un:</div>
          <div class="content">
            <div class="percent {{ percentOpportunityQuantity() > 0 ? 'positive' : 'negative' }}">
              {{ percentOpportunityQuantity() >= 0 ? '+' : '' }}{{ percentOpportunityQuantity() }}%
            </div>
            <div class="value">{{ performanceLite.opportunity_quantity }}</div>
          </div>
          <div class="title">meta:</div>
          <div class="content">
            <div class="value">{{ opportunity_quantity_goal }}</div>
          </div>
        </div>
        <div class="cb-items opportunity opportunity-value">
          <div class="title">oportunidades $:</div>
          <div class="content">
            <div class="percent {{ percentOpportunityValue() > 0 ? 'positive' : 'negative' }}">
              {{ percentOpportunityValue() >= 0 ? '+' : '' }}{{ percentOpportunityValue() }}%
            </div>
            <div class="value strong">{{ performanceLite.opportunity_value | numberAbrev }}</div>
          </div>
          <div class="title">meta:</div>
          <div class="content">
            <div class="value">{{ opportunity_value_goal | numberAbrev }}</div>
          </div>
        </div>
        <div class="cb-items">
          <div class="title">tendencia mensal de aprovação % | $:</div>
          <div class="content">
            <div class="split">
              <div class="percent positive">+5%</div>
              <div class="value">26%</div>
            </div>
            <div class="split">
              <div class="percent positive">+5%</div>
              <div class="value">1.2mi</div>
            </div>
          </div>
          <div class="title">meta de aprovação % | $:</div>
          <div class="content">
            <div class="split">
              <div class="value">30%</div>
            </div>
            <div class="split">
              <div class="value">1.2mi</div>
            </div>
          </div>
        </div>
        <div class="cb-items">
          <div class="title">aprovação atual mês % | $:</div>
          <div class="content">
            <div class="split">
              <div class="percent positive">+5%</div>
              <div class="value strong">26%</div>
            </div>
            <div class="split">
              <div class="percent positive">+5%</div>
              <div class="value strong">1.2mi</div>
            </div>
          </div>
          <div class="title">meta de aprovação % | $:</div>
          <div class="content">
            <div class="split">
              <div class="value">30%</div>
            </div>
            <div class="split">
              <div class="value">1.0mi</div>
            </div>
          </div>
        </div>
        <div class="cb-items">
          <div class="title">consolidado anual % | $:</div>
          <div class="content">
            <div class="split">
              <div class="percent positive">+5%</div>
              <div class="value strong">26%</div>
            </div>
            <div class="split">
              <div class="percent positive">+5%</div>
              <div class="value strong">3.6mi</div>
            </div>
          </div>
          <div class="title">meta de aprovação % | $:</div>
          <div class="content">
            <div class="split">
              <div class="value">30%</div>
            </div>
            <div class="split">
              <div class="value">1.2mi</div>
            </div>
          </div>
        </div>
      </div>
    </table>
  </mat-card>
</div>
