<hr class="divisor">
<form *ngIf="isAdmin || isAttendance" [formGroup]="budgetForm" novalidate autocomplete="off">
  <input type="hidden" formControlName="id">
  <input type="hidden" formControlName="task_id">
  <input type="hidden" formControlName="tax_aliquot">
  <mat-card>
    <div class="row">
      <div class="col-md-6 text-left">
        <p class="lead">Valor</p>
        <p *ngIf="budget != null" class="lead subtitle">{{ budget?.responsible?.name + ' | ' + (budget.updated_at | date: 'dd/MM/yyyy HH:mm') }}</p>
      </div>
      <div *ngIf="total > 0" class="col-md-6 text-right">
        <p class="lead total-value">{{ total | currency: 'BRL' }}</p>
        <p class="lead subtitle">Valor total da proposta</p>
      </div>
    </div>
    <hr class="divisor">
    <div class="row">
      <mat-form-field class="col-md-3">
        <input currencyMask formControlName="gross_value" matInput placeholder="Valor bruto*">
      </mat-form-field>
      <mat-form-field class="col-md-3">
        <input currencyMask formControlName="bv_value" matInput placeholder="Valor BV*">
      </mat-form-field>
      <mat-form-field class="col-md-3">
        <input currencyMask formControlName="equipments_value" matInput placeholder="Equipamentos*">
      </mat-form-field>
      <mat-form-field class="col-md-3">
        <input currencyMask formControlName="logistics_value" matInput placeholder="Logística*">
      </mat-form-field>
      <mat-form-field class="col-md-3">
        <input currencyMask formControlName="optional_value" matInput placeholder="Opcionais">
      </mat-form-field>
      <mat-form-field class="col-md-3">
        <input currencyMask formControlName="tax_value" matInput placeholder="Impostos">
      </mat-form-field>
      <mat-form-field class="col-md-3">
        <input currencyMask formControlName="others_value" matInput placeholder="Outros">
      </mat-form-field>
      <mat-form-field *ngIf="isAttendance" class="col-md-3">
        <input currencyMask formControlName="discount_value" matInput placeholder="Descontos">
      </mat-form-field>
      <!--
      <mat-form-field class="col-md-3">
        <input currencyMask formControlName="sales_commission_value" matInput placeholder="Comissão de vendas">
      </mat-form-field>
      -->
      <mat-form-field *ngIf="!isAttendance" class="col-md-1">
        <input currencyMask [options]="{prefix: ''}" class="text-right" formControlName="markup_aliquot" matInput placeholder="Fator">
        <span matSuffix>%</span>
      </mat-form-field>
      <mat-form-field *ngIf="!isAttendance" class="col-md-2">
        <input currencyMask class="text-right" formControlName="markup_value" matInput placeholder="Markup">
      </mat-form-field>
    </div>
    <mat-card-actions *ngIf="isAdmin" class="col-md-12 text-right">
      <button class="cb-button" *ngIf="typeForm === 'new' || budget == null" color="primary" (click)="save()" mat-raised-button>
        SALVAR
      </button>
      <button class="cb-button" *ngIf="typeForm === 'edit' && budget != null" color="primary" (click)="edit()" mat-raised-button>
        EDITAR
      </button>
    </mat-card-actions>
  </mat-card>
</form>
